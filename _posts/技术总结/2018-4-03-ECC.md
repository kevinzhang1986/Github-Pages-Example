---
layout:     post
title:      基础篇(RAS)—基本纠错和检错算法
category: 技术总结
description: 基础篇(RAS)—基本纠错和检错算法
tags: RAS
---

# RAS——基本纠错和检错算法

## 1 Parity 奇偶校验
奇偶校验(Parity Check）是一种校验代码传输正确性的方法。根据被传输的一组二进制代码的数位中"1"的个数是奇数或偶数来进行校验。

为了能检测和纠正内存软错误，首先出现的是内存"奇偶校验"。内存中最小的单位是比特，也称为"位"，位只有两种状态分别以1和0来标示，每8个连续的比特叫做一个字节(byte)。不带奇偶校验的内存每个字节只有8位，如果其某一位存储了错误的值，就会导致其存储的相应数据发生变化，进而导致应用程序发生错误。而奇偶校验就是在每一字节(8位)之外又增加了一位作为错误检测位。在某字节中存储数据之后，在其8个位上存储的数据是固定的，因为位只能有两种状态1或0，假设存储的数据用位标示为1、1、1、0、0、1、0、1，那么把每个位相加(1+1+1+0+0+1+0+1=5)，结果是奇数。对于偶校验，校验位就定义为1，反之则为0;对于奇校验，则相反。当CPU读取存储的数据时，它会再次把前8位中存储的数据相加，计算结果是否与校验位相一致。从而一定程度上能检测出内存错误，奇偶校验只能检测出错误而无法对其进行修正，同时虽然双位同时发生错误的概率相当低，但奇偶校验却无法检测出双位错误。

**奇校验**:就是让原有数据序列中(包括你要加上的一位)1的个数为奇数

1000110(0)你必须添0这样原来有3个1已经是奇数了所以你添上0之后1的个数还是奇数个。

**偶校验**:就是让原有数据序列中(包括你要加上的一位)1的个数为偶数

1000110(1)你就必须加1了这样原来有3个1要想1的个数为偶数就只能添1了。

## 2 Hamming Code 汉明码
Hamming 编码采用多个Parity值来定位错误数据中哪一个bit出现错误。核心思想是用Parity数值来描述错误bit的位置信息。需要注意的是Hanmming 编码只能定位到一个bit的错误，因此下面默认只有一个bit出现错误。

![](images\2018-4-3-ECC\1.jpg) <br>

例如，发送端d7出现错误，那么在接收端，P1 P2 P4（注意上图左边的P1 P2 P4 P8实际就是P1-P4）就会和重新计算的不一致。1011b就是11，定位到11位（d7）出现错误，将它取反则可以纠正。
hamming code无法解决多bit错误，例如上面d7,d8出现异常，在校验是，会误定位到00111b=7位置的d4出现问题。

## 3 SECDEC/ECC
SECDEC是在Hamming code基础上增加一个全部数据的Parity校验值。
汉明码能定位到单bit的位置，但是如果出现两个bit错误，比如说前面提到的d7 d8错误，误认为是第七位出现问题，将这个位取反，重新得到的校验值是和存储的值是一样的，但是实际上没有纠正成功。
SECDEC/ECC在汉明码基础上增加一个全部数据的校验值，以增强检错纠错能力，实现单bit纠错，双bit检错。（前面的例子中，全局的parity校验是对的，但是汉明parity是错的，说明检测到了偶数个错误，但是定位的bit不一定是出错位置）。

## 4 CRC
![](images\2018-4-3-ECC\2.jpg) <br>
将数据作为被除数，除以一个约定的数，得到余数。把余数加到数据末尾，在接收端除以约定的数，得到的值应该是0.