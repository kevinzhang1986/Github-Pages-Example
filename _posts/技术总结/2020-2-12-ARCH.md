---
layout:     post
title:      架构设计_嵌入式软件模块怎么做解耦
category: 架构设计
description: 嵌入式软件模块怎么做解耦
tags: arch
---

# 架构设计-嵌入式软件模块怎么做解耦
上一篇博文讲了怎么做架构设计，今天聊一下如果一个软件系统已经基本成型，怎么再优化。优化也可以理解为重构，而重构的一部分工作就是解耦。从代码维度做解耦的方式有很多，但本质上都是提炼公用的代码进行封装，即所谓的“添加”，然后再进行测试，没问题再集成，“删除”原有的冗余代码,而不是直接剪切。 本文先不从底层代码进行分析（这个留到后面的博文再讨论），先从模块角度分析一下怎么做解耦。

总体上，模块解耦有这些经验实践。

## 软硬件解耦
例如，内核的DT，ACPI，VFS，UEFI的protocol都归为这一类。

## 上层接口解耦
嵌入式软件夹在硬件和上层软件之间，属于夹心层。对于上层的业务软件来说，不同产品各不相同，提供的接口繁多。因此，需要定义接口基线，并提供扫描工具识别接口的变更。其次，提取接口抽象层（外观模式，反射模式）。

## 特性解耦
机制和策略解耦。

## 开源解耦
利用现有注册接口。
尽量抽取自研的代码放到单独的地方。